 <%= csrf_meta_tag %>
 <style>
  .image {
    width: 200px;
    height: 300px;
  }

  .badge {
    cursor:pointer;
    width: 100%;
    border: 1px solid lightgrey;
    text-align: center;
    padding: 18px;
    font-size: 1.2rem;
    color: lightgrey;
  }



  .haut  {
    display: flex;
  }
  .droite {
    display: flex;
    flex-direction: column;

  }
  .comment {
    margin-left: 10px
  }

  .badge[data-active="true"] {
    background-color: blue;
    color: white;
  }

  .badge[data-active="false"] {
    background-color: white;
  }

  .badge[data-active="false"]:hover {
    background-color: grey;
    color: white;
  }
</style>


<div class="container" style="margin-top: 80px">

  <div class="haut" style="display: flex;justify-content: space-between;">
    <h3><%= @reading.livre.title %></h3>
    <div style="width: 70px;display: flex;justify-content: space-between;font-size: 1.5rem">
      <%= link_to review_consult_path(@reading)  do%>
      <i class="fas fa-comments"></i>
      <% end %>
      <%= link_to notation_consult_path(@reading) do  %>

      <i class="fas fa-list-ol"></i>
      <% end %>
    </div>
    <div style="font-size: 1.5rem">
      <%= link_to book_destroy_path(@reading) do  %>
      <i class="far fa-calendar-times"></i>
      <% end %>
    </div>


  </div>
  <hr>
  <div class="middle" style="display: flex;justify-content: space-between;">
    <div><%= @reading.livre.author %> </div>
    <div id="tag" data-toggle="modal" data-target="#exampleModal" style="cursor: pointer;">
      <%= @tag %>

    </div>
  </div>
  <hr>
  <h6 id="category"></h6>
  <div class="haut">

    <div class="gauche">
      <%= image_tag @reading.livre.imageurl, alt: "alttext", class: "image" %>
    </div>
    <div class="droite">
      <div class="comment">
        <%=  @reading.livre.description.html_safe %>
      </div>
    </div>
  </div>
  <hr>
  <div class="bas" style="display: flex;text-align: right;">
    <div>
     <% if @reading.status == 'wl' %>
     <%= link_to 'je lis ce livre', book_update_path(@reading), method: 'patch',  class: "btn btn-lg btn-primary mb-5"%>
     <% end %>
     <% if @reading.status == 'ec' %>
     <% if @tag == [] %>
     <button class="btn btn-primary " id="note" data-toggle="modal" data-target="#exampleModal">Noter le livre</button>
     <% else %>
     <%= link_to 'noter le livre', notations_path(@reading) , class: "btn btn-primary"  %>
     <% end %>
     <% end %>
   </div>
 </div>
 <hr>
</div>




<!-- <script src="jquery.min.js"></script>
<script src="rangeslider.min.js"></script>
<script>

    $('input[type="range"]').rangeslider();

</script>
-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Définissez la catégorie</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <% @tags.each do |t| %>
          <% if t.name == @tag %>
          <%  act="data-active=true" %>
          <% else %>
          <%  act="data-active=false" %>
          <% end %>
          <div class="badge" data-reading="<%= @reading.id %>" data-cat="<%= t.name  %>" data-id="<%= @reading.livre.id %>" <%= act %> data-color="<%= t.color %>" ><%= t.name %></div>
          <% end %>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>

